---
title: 欧拉计划第十题
date: 2017-11-19 00:15:22
tags: Euler
categories: problems
---

Summation of primes

The sum of the primes below 10 is 2 + 3 + 5 + 7 = 17.

Find the sum of all the primes below two million.

题意：求2000000内的素数之和

1.自己优化后的代码

```Python
import time
t0 = time.clock()
def primeJudge(n):
    sqrtNum = int(n**0.5)
    for i in range(3,sqrtNum+1,2):
        if n%i == 0:
            return False
    return True
sum=17
for i in range(11,2000000,2):
    if primeJudge(i):
        sum+=i
print(sum)
print(time.clock()-t0)
```

答案142913828922

耗时7.5s左右



2.使用sieve of euler(欧拉筛算法)后的代码

```Python
import time
t0= time.clock()
pn = 2000000
primes = []
is_prime = [True for i in range(pn)]
is_prime[0] = False
is_prime[1] = False
for i in range(2, pn):
    if is_prime[i]: primes.append(i)
    for j in primes:
        if i * j >= pn:
            break
        is_prime[i * j] = False
        if i % j == 0: break
sum =0
for i in primes:
    sum+=i
print(sum)
print(time.clock()-t0)
```

耗时1.31s



3.使用了[链接在这](https://projecteuler.net/thread=10;page=5)的Lucy_Hedgehog的方法

```Python
import time
def P10(n):
   r = int(n**0.5)
#  assert r*r <= n and (r+1)**2 > n
   V = [n//i for i in range(1,r+1)]
   #print(V)
   V += list(range(V[-1]-1,0,-1))
   #print(V)
   S = {i:i*(i+1)//2-1 for i in V}
   #print(S)
   for p in range(2,r+1):
      if S[p] > S[p-1]:  # p is prime
         sp = S[p-1]  # sum of primes smaller than p
         p2 = p*p
         for v in V:
            if v < p2: break
            S[v] -= p*(S[v//p] - sp)
   return S[n]
t0 = time.clock()
N = 2000000
print(P10(N))
print(time.clock()-t0)
```

耗时0.012s

算十亿内的质数和也只使用1.07s，可以参见这的解释 [点这](https://www.zhihu.com/question/29580448)